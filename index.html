<!DOCTYPE html>

<head>
    <script src="node_modules/opencv.js/opencv.js"></script>
    <script src="node_modules/fabric/dist/fabric.js"></script>
    <script src="scripts/grabcut.js"></script>
    <script src="scripts/utils.js"></script>
    <script src="scripts/hotkeys.js"></script>
    <link rel="stylesheet" href="styles.css">
    <title>Prototype</title>
</head>

<body>
    <h1>Prototype</h1>
    <input type="file" id="file_input" accept="image/*" multiple>
    <script src="scripts/file_upload.js"></script>
    <div>
        File
        <input id="file_chooser" type="number" min=0 onchange="displayImage(this.value)">
    </div>
    <div>
        Mode
        <button onclick="setInputMode(this)">Polygon</button>
        <button onclick="setInputMode(this)">Rectangle</button>
        <button onclick="setInputMode(this)">Green Line</button>
        <button onclick="setInputMode(this)">Red Line</button>
        <button onclick="setInputMode(this)">Pan</button>
        <script src="scripts/input_mode.js"></script>
    </div>
    <div>
        Brush Width
        <input type="number" min="0" onchange="input_canvas.freeDrawingBrush.width = parseInt(this.value)">
    </div>
    <div>
        Type
        <button onclick="changeLaneType(this)">Dashed (d)</button>
        <button onclick="changeLaneType(this)">Solid (s)</button>
        <button onclick="changeLaneType(this)">Shoulder (r)</button>
        <input type="number" min="1" onchange="state.lane.number = parseInt(this.value)">Lane Number</input>
        <script>
            const changeLaneType = button => state.lane.type = button.innerText == 'Dashed (d)' ? 'd' : button.innerText == 'Solid (s)' ? 's' : 'r';
        </script>
    </div>
    <div>
        Color
        <button onclick="changeLaneColor(this)">White</button>
        <button onclick="changeLaneColor(this)">Yellow</button>
        <script>
            const changeLaneColor = button => state.lane.color = button.innerText === 'White' ? 'w' : 'y';
        </script>
    </div>
    <button id="satisfied" onclick="satisfied()">Satisfied</button>
    <script src="scripts/satisfied.js"></script>
    <div class="canvases">
        <div>
            <h2>Input</h2>
            <canvas id="input"></canvas>
        </div>
        <div>
            <h2>Extracted</h2>
            <canvas id="extracted"></canvas>
        </div>
        <div>
            <h2>Segmentation</h2>
            <canvas id="segmentation"></canvas>
        </div>
        <div>
            <h2>Instance</h2>
            <canvas id="instance"></canvas>
        </div>
    </div>
    <script src="scripts/globals.js"></script>
</body>

</html>